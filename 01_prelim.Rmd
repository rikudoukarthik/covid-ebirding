---
title: "COVID eBirding: Preliminary analyses"
output: html_document
date: "2021/10/28"
author: "Karthik Thrikkadeeri"
---

This is the preliminary analysis notebook for the COVID eBirding study.
Here, I explore mainly via visualisations the basic patterns in the data.
Our question is how the pandemic has affected birdwatching as well as birds in India.

```{r data_filt, eval=FALSE, echo=FALSE}
load("data/ebd_IN_relSep-2021.RData") 
data <- data %>% filter(YEAR >= 2018) 
save.image("data/rawdata.RData")
### Group accounts (type GA.1) need to be filtered from the raw data before conducting the analyses. Also filtering for only travelling or stationary protocols.
groupaccs <- read.csv("ebd_users_GA_master_relAug-2021.csv",
                        na.strings = c(""," ",NA))
groupaccs <- groupaccs[1:400,] %>% mutate(CATEGORY = ifelse(GA.1 == 1, "GA.1", "GA.2"))
filtGA <- groupaccs %>% filter(CATEGORY == "GA.1") %>% select(OBSERVER.ID)
data0 <- data %>% anti_join(filtGA) %>%
  filter(PROTOCOL.TYPE %in% c("Traveling","Stationary"))
rm(list = setdiff(ls(envir = .GlobalEnv), c("data0")), pos = ".GlobalEnv")
save.image("data/data0.RData")

random subset for anaylsis
set.seed(10)
data_sub <- data0 %>% filter(GROUP.ID %in% sample(unique(data0$GROUP.ID),100000))
save(data_sub, file = "data/data_sub.RData")
```

```{r data_load, cache=TRUE, include=FALSE}
load("data/data_sub.RData")
```

```{r setup, include=FALSE}
library(tidyverse)
library(lubridate)
```





